# 図解即戦力　システム設計のセオリーと実践方法がこれ１冊でしっかりわかる教科書
システム設計が何もわからない状態なので、それを掴むために[この本](https://gihyo.jp/book/2023/978-4-297-13791-5)で得た知見をまとめてみる

## システム要件定義
以下の2つに分けられる
- 機能要件 : システムに求める「機能」を定義
  - データのソートができるようにしたい,データを入力できるようにしたい ..
- 非機能要件 : システムに求める「機能面以外」を定義
  - 可用性,性能・拡張性,運用・保守性,セキュリティ,システム環境 ..

## 設計のおおまかな流れ
1. 要件
2. システム設計を検討
3. 全体に関わることを設計
4. 個々の設計

## テストの設計 
- 「V字モデル」(調べて)

## 工数について
一般的な工数　
- 要件定義:設計:開発:テスト = 10:20:40:30
  
## システム設計について
### システム設計とは？
要件を実現するために「適切にそれら（プロダクト）を選び」、それらを操作するために準備された仕組みを利用して「どのように設定すればうまくいくのか」を考えるもの

設計分類
- アプリ　　-> 入出力設計、データベース設計、ロジック設計
- インフラ　-> ネットワーク設計、サーバ設計

設計の種類
- 管理系：画面一覧、テーブル一覧、プログラム一覧
- 俯瞰系：システムアーキテクチャ設計、バッチ全体設計、ネットワーク全体構成
- 個別系：画面レイアウト、テーブルレイアウト、サーバ設定仕様書

### 全体設計
その他の設計分類においてここの設計ができるように役割分担や設計方針・ルールを決める

### 入出力設計
システムの入出力は2つに分類
- 人に向けたもの：表示画面、出力する値
- システムに向けたもの：どのような形で情報を作り、どのような形で情報を受け取るか
画面レイアウトなど

### データベース設計
保存形式は大きく分けて2つ
- RDB(リレーショナルデータベース)
- NoSQL

**RDB**
- 強み：不整合なくデータを管理でき、高度な検索にも強い
- 弱み：拡張性が低く、大容量データになると遅い。データを構造化する必要がある。
- データ構造：行・列の二次元構造
- 例：MySQL, ProstgreSQL, OracleDatabese
- 利用例：業務データ全般（ECサイト、金融などの不整合があってはならないケース）
- 補足：伝統的なデータベース

**NoSQL(Not only SQL,RDM以外を指す)**
- 強み：大容量データの取り扱いに強く、構造かできないデータを取り扱える。拡張性が高い。
- 弱み：データの整合性が保証されない。高度な検索が難しい
- データ構造：さまざまな形式がある。キーバリュー型、グラフ型など..
- 利用例：データ分析用のデータ、生体認証のような非構造データ、大量だが時系列順に登録すれば良いログ系のデータ
- 補足：RDBに比べると新しい方式

### ロジック設計
どの範囲をそのプログラムで処理するのかを決めて、個々のプログラムが処理の内容を設計していく。クラス設計など
- オンラインなのかバッチなのか
  - オンライン形式：その場で処理を完結させる
  - バッチ形式：特定のタイミングで実行するバッチ形式

### ネットワーク設計
非機能要件、特に「可用性」「性能・拡張性」「運用・保守性」「セキュリティ」に大きな影響
- FWのルールをどうするか
- LB(ロードバランサ)の負荷分散をどのように行うか

非機能要件の例
- 可用性
  - 要件：故障時にシステムが継続利用できるかどうか
  - 対策：機器の二重化、機器故障時の検知方法や自動での経路切り替え、復旧後の切り戻し
- 性能・拡張性
  - 要件：サーバ一台では業務量を処理できないため、スケールアウト構成が実現できるようにすること
  - 対策：ロードバランサを導入
- 運用・保守性
  - 要件：システム全体として24時間365日稼働し続けられること
  - 対策：ネットワーク機器のメンテナンス時間が取れるように、機器を冗長構成にする
- セキュリティ
  - 要件：Webサイトへの悪意あるリクエストをすぐにブロックできるようにする
  - 対策：WAFを導入

### サーバ設計
適切なサーバを用意する
- 本番環境：フルスペック、全ての機器を二重化
- 業務訓練環境：サーバーを最低限の数にするが、アプリケーションは一式稼働できるようにする
- 性能確認環境：アプリケーションの性能を確認する環境。スペックは本番同様、スケールアウト部分はミニマム
- 開発、テスト環境：全ての機能を１台で賄う

## 「システム設計」に影響する考え
### ソフトウェア設計モデル
**MVCモデル**
Model(データを定義する担当),View(見た目を担当),Controller(modelとviewを繋げる)の3つに分けて機能を作る<br>
例）Lalavel, Ruby on Rails, Spring MVC

**マイクロサービスアーキテクチャ**
サービス単体で独立して動作するように設計する手法<br>
各サービスは疎結合

### 使用するフレームワーク
フレームワークはシステムを効率よく開発するためのソフトウェア
- 使わない場合：全ての処理を1つずつ作っていく必要がある
- 使うと：処理の記述は最低限。大規模開発になる程効力を発揮(Ruby on Rails)

### 社外要員・社内要員
横槍のないシステムはまずない！！

### オンプレミスとクラウド
**クラウド**
サーバやネットワークをレンタルするサービス
- SaaS
- PaaS
- IaaS
**オンプレミス**
自社で全てハードウェアを準備して構築する方法

### 仮想化技術
自分のOSに仮想のOSを立ち上げること<br>
仮想化のメリット
- 拡張性を向上しやすい
- コストを削減しやすい
- 空きリソースをうまく使える
- 以降もしやすお
デメリット
- 単体のOSとしてみると、パフォーマンスが悪化する可能性が高い
- 障害発生時の対応が複雑

### ミドルウェア
構築するアプリケーションの間に位置するソフトウェア

## 全体設計
### 流れとポイント
完成形は読み物のようになるらしい。なぜこのような設計になっているか？を知るためのもの<br>
全体設計の中でも大きな部分
- システムアーキテクチャ設計
- 信頼性・安全性設計
- 環境設定
  - (分割)開発環境設定
- 性能設計
- セキュリティ設計
  - (分割)認証・認可設計
  - (分割)メニュー設計
- 運用方式設計(全体編)
  - (分割)バックアップ設計
  - (分割)障害復旧設計
  - (分割)ライブラリ管理設計
  - (分割)運用手順書
- 外部接続方式設計(全体編)
- 標準化設計
  - (分割)ドキュメント設計
- テスト方式設計(全体編)
  - (分割)テストツール利用マニュアル
- 移動方式設計(全体設計)

### システムアーキテクチャ設計 -> 多すぎてまとめられないので何度も読む!!
システムの構成全体を描くとともに、どのような考えでその設計に至ったかを整理する<br>
「要件を確認」-> 「要件を満たすためのパターン選択」-> 「全体を考慮して採択」
- 並行して「信頼性・安全性設計」を行うといい
- アーキテクチャの設計の章立てと概要
  - p65を見る
- RAISIS
  - Reliability:故障のしにくさ
  - Availability:稼働し続けること
  - Serviceability:障害からの復旧時間、メンテナンスのしやすさ
  - Integrity:データの矛盾がなく一貫性を保っていること
  - Security:安全性
 
